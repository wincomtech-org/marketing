{include file="inc/head.tpl"}
<script src="{$site.theme_s}js/jquery-form.js"></script>
<style>
{literal}
    .up_img_de{position:absolute;text-align:center;bottom:-50px;width:225px;margin-left:-38px;}
    .privacy-img{float:left;margin-top:17px;}
    #name{float:left;margin-right:20px;}
    .basic-block .basic-img{width:130px;margin:0px auto 10%;}
    .clear{display:block;content:"";clear:both;}

.imgbox{width:110px;height:150px;margin:0 auto;} 
.imgbox1{width:110px;height:110px;border:1px solid #e7e8e8;background:#f5f5f5;border-radius: 50%;} 
.imgbox1 img{width:110px;height:110px;} 
.btnupload{float:left;width: 85px; height: 30px; line-height: 30px; text-align: center; background: #ebebeb; border:1px solid #7e7e7e; display: block; font-size: 16px; color:#4c4c4c; margin-left:10px; margin-top:5px; position:relative;}
.upload_pic{display: block; width: 100%; height: 30px; position: absolute; left: 0; top: 0; opacity: 0; } 
{/literal}
</style>

<body>
{include file="inc/header.tpl"}

<div class="page-content">
    <div class="usercenter_page">
    {include file="inc/user_menu.tpl"}
        <div class="usercenter_content usercenter_demand">
            <div class="demand-block basic-block">
                <!-- 页面默认显示的 -->
                <div class="basic-show">
                    <div class="basic-edit"><img src="{$site.theme_s}img/basic_edit.jpg"/></div>
                    <dl class="basic-img" style="width:33%;">
                        <dt><img src="{$user_info.thumb}"/></dt>
                        <dd style="height:25px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">{$user_info.username}</dd>
                        <span style="left:65%;bottom:25%;"></span>
                        <div></div>
                    </dl>
                    <div class="basic-block-tit">基本信息</div>
                    <ul>
                        <li><em><img src="{$site.theme_s}img/basic_4.jpg" alt="{$site.site_name}"/></em>出生日期：{$user_info.birthday}</li>
                        <li><em><img src="{$site.theme_s}img/basic_3.jpg" alt="{$site.site_name}"/></em>从业年限：{$user_info.workage} 年</li>
                        <li><em><img src="{$site.theme_s}img/basic_6.jpg" alt="{$site.site_name}"/></em>微信号：{$user_info.weixin}</li>
                        <li><em><img src="{$site.theme_s}img/basic_7.jpg" alt="{$site.site_name}"/></em>一句话简介：{$user_info.introduce}</li>
                    </ul>
                    <div class="basic-block-tit">账户信息</div>
                    <ul>
                        <li><em><img src="{$site.theme_s}img/basic_8.jpg" alt="{$site.site_name}"/></em>邮箱：{$user_info.email}</li>
                        <li><em><img src="{$site.theme_s}img/basic_9.jpg" alt="{$site.site_name}"/></em>手机号：{$user_info.telephone}</li>
                    </ul>
                </div>

                <!-- 页面默认不显示的 -->
                <div class="demand-block-content edit_area" style="display: none;">
                <form id="userForm" method="post" action="{$url.edit_post}" enctype="multipart/form-data">
                    <div class="imgbox">
                        <div id="preview1" class="imgbox1">{if $user_info.thumb}<img src="{$user_info.thumb}" class="preimg">{/if}</div>  
                        <address class="btnupload">选择文件
                            <input type="file" class="upload_pic" onchange="preview(this,1)" name="avatar" value="{$user_info.avatar}">
                        </address>
                    </div>

                    <div class="basic-block-tit">基本信息(<s class="red">*</s>号为必填)</div>

                    <div class="basic-tit"><img src="{$site.theme_s}img/basic_1.jpg"/>昵称</div>
                    <div class="basic-content">
                        <input type="text" name="nickname" id="name" value="{$user_info.username}"/>
                        <em class="clear"></em>
                    </div>
                    <i class="clear"></i>

                    <div class="basic-tit"><img src="{$site.theme_s}img/basic_2.jpg"/>性别</div>
                    <div class="basic-content sex">
                        <span><input {if $user_info.sexnum eq 1}checked style="color: #FFFFFF;background: #a90916;" {/if} type="radio" name="sex" id="sex1"  value="1"/> 男</span>
                        <span><input {if $user_info.sexnum neq 1}checked style="color: #FFFFFF;background: #a90916;" {/if} type="radio" name="sex" id="sex2"  value="2"/> 女</span>
                    </div>

                    <div class="basic-tit"><img src="{$site.theme_s}img/basic_3.jpg"/>从业年限</div>
                    <div class="basic-content">
                        <div class="workage">
                            <input type="number" name="workage" value="{$user_info.workage}"> 年
                        </div>
                    </div>

                    <div class="basic-tit">
                        <img src="{$site.theme_s}img/basic_4.jpg"/>出生日期
                    </div>
                    <div class="basic-content">
                        <input type="text" name="birthday" id="birthday" value="{$user_info.birthday}" />
                    </div>

                    <div class="basic-tit">
                        <img src="{$site.theme_s}img/basic_5.jpg"/>所在地区
                    </div>
                    <div class="basic-content">
                        <input type="text" name="address" value="{$user_info.address}" />
                    </div>

                    <div class="basic-tit">
                        <img src="{$site.theme_s}img/basic_6.jpg"/>微信号
                    </div>
                    <div class="basic-content">
                        <input type="text" name="weixin" value="{$user_info.weixin}" />
                    </div>

                    <div class="basic-tit">
                        <img src="{$site.theme_s}img/basic_7.jpg"/>一句话简介
                    </div>
                    <div class="basic-content intro">
                        <textarea id="des" rows="3" name="introduce"  placeholder="请描述您的经验和专长，会更容易受到关注和青睐"/>{$user_info.introduce}</textarea>
                    </div>

                    <div class="basic-block-tit">账户信息</div>
                    <div class="basic-tit"><img src="{$site.theme_s}img/basic_8.jpg"/>邮箱</div>
                    <div class="basic-content">
                        <input type="text" id="email" name="email" value="{$user_info.email}" required/>
                    </div>
                    <div class="basic-tit"><img src="{$site.theme_s}img/basic_9.jpg"/>手机号</div>
                    <div class="basic-content">
                        <input type="text" readonly value="{$user_info.telephone}"/>
                    </div>
                    <div class="basic-btn">
                        <!-- <button onclick="edit_user();">保存</button> -->
                        <input type="hidden" name="token" value="{$token}">
                        <input type="submit" value="保存">
                        <a class="cancel" href="{$url.user}">取消</a>
                    </div>
                </form>
                </div>
            </div>
        </div>
    </div>
</div>

{include file="inc/footer.tpl"}
</body>
<script>
{literal}
    // 预览头像
    function preview(f,o)  
    {
        var prevDiv = document.getElementById('preview'+o);
        if (f.files && f.files[0]) {
            var reader = new FileReader();
            reader.onload = function(evt) {
                prevDiv.innerHTML = '<img src="' + evt.target.result + '" />';
            }
            reader.readAsDataURL(f.files[0]);
        } else {
            // prevDiv.innerHTML = '<div class="img" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src=\'' + f.value + '\'"></div>';
            prevDiv.innerHTML = '<img style="width:110px;height:110px" src="'+ f.value +'" />';
        }
    }

    $('.up_img').css("height",'130px')
    $('.basic-img .basic-img-img').css("height",'130px')

    $(".basic-area em").each(function(){
        $(this).click(function(i){
            if($(this).hasClass('onstyle')){
                $(this).removeClass('onstyle').find('input').removeAttr('checked');
            }else{
                $(this).addClass('onstyle').find('input').attr('checked','checked');
            }
        });
    })
    $(".sex span").each(function(){
        $(this).click(function(i){
            $(this).addClass('onstyle').find('input').attr('checked','checked').end().siblings().removeClass('onstyle').find('input').removeAttr('checked');
        });
    });
    
    //限制修改不为空
	$("#name").blur(function(){
		if($(this).val()==""){
			$(this).val("此选项必填").css("color","#f05");
		}
	})
	$("#name").focus(function(){
		if($(this).val()=="此选项必填"){
			$(this).val("").css("color","#000");
		}
	})
	$("#cityArea").blur(function(){
		if($(this).val()==""){
			$(this).val("此选项必填").css("color","#f05");
		}
	})
	$("#cityArea").focus(function(){
		if($(this).val()=="此选项必填"){
			$(this).val("").css("color","#000");
		}
	})
	$("#wxNum").blur(function(){
		if($(this).val()==""){
			$(this).val("此选项必填").css("color","#f05");
		}
	})
	$("#wxNum").focus(function(){
		if($(this).val()=="此选项必填"){
			$(this).val("").css("color","#000");
		}
	})
	$("#des").blur(function(){
		if($(this).val()==""){
			$(this).css("color","#f05");
			$(this).val("此选项必填")
			
		} 
	})
	$("#des").focus(function(){
		if($(this).val()=="此选项必填"){
			$(this).val("").css("color","#000");
		}
	})
	
	$("#ex").change(function(){
		
		if($(this).val()=="请选择您的从业年限"){
			//alert("请重新选择您的从业年限")
			$(this).val("1-3年")
		}
			
		
	})
	
	//修改完成
	
    $("#server1").change(function(){
        $('#server2').empty();
        if($('#server1 option:selected')){
            var demand_type1 =$('#server1 option:selected').attr('value');
            $.ajax({
                type: 'post',
                url: url + "/tag/service_child.shtml",
                data: {
                    'v' : '2.0',
                    'source' : 2,
                    'pid' : demand_type1
                },
                success: function(data){
                    var  dt = data.data;

                    $('#server2').append('<option value="0">全部</option>');
                    
                    for(var i=0;i<dt.length;i++){
                        $('#server2').append('<option value="'+ dt[i].id +'">'+ dt[i].name +'</option>');
                    }
                }
            });
        }
    });

   

    $('.basic-edit').click(function () {
        $('.basic-show').hide();
        $('.edit_area').show();
    });

    $('.cancel').click(function(){
        $('.basic-show').hide();
        $('.edit_area').show();
    });

    var skip_url = location.href;
    if(skip_url.indexOf('#') != -1){
        $('.basic-show').hide();
        $('.edit_area').show();
    }
{/literal}
</script>

<script type="text/javascript" src="{$site.theme_s}js/enrol.js"></script>  
</html>